@implements IForm

<EditForm
  Model="@Distribuidor"
  OnInvalidSubmit="@Invalid"
  OnValidSubmit="@Valid">
  <DataAnnotationsValidator />
  <ValidationSummary />

  <fieldset>
    <div class="field">
      <label class="label">Nombre Paqueteria</label>
      <div class="control has-icons-right">
        <input
          required
          class="input"
          type="text"
          placeholder="Nombre Paqueteria"
          @bind="NombrePaqueteria">
      </div>
    </div>

    <label class="label">RFC</label>
    <div class="field is-grouped">
      <div class="control has-icons-right">
        <input
          required
          class="input"
          type="text"
          placeholder="RFC"
          @bind="RFC">
      </div>
    </div>

    <label class="label">URL</label>
    <div class="field is-grouped">
      <div class="control has-icons-right">
        <input
          required
          class="input"
          type="text"
          placeholder="www.fedex.com.mx"
          @bind="URL">
      </div>
    </div>
    
    <label class="label">Nombre del Responsable</label>
    <div class="field is-grouped">
      <div class="control has-icons-right">
        <input
          required
          class="input"
          type="text"
          placeholder="Nombre Responsable"
          @bind="NombreResponsable">
      </div>
    </div>

    <label class="label">Correo</label>
    <div class="field is-grouped">
      <div class="control has-icons-right">
        <input
          required
          class="input"
          type="text"
          placeholder="ivan@gmail.com"
          @bind="Correo">
      </div>
    </div>
    
    <label class="label">Telefono</label>
    <div class="field is-grouped">
      <div class="control has-icons-right">
        <input
          required
          class="input"
          type="text"
          placeholder="55-555-5555"
          @bind="Telefono">
      </div>
    </div>

    <label class="label">Costo</label>
    <div class="field is-grouped">
      <div class="control has-icons-right">
        <input
          required
          class="input"
          type="text"
          placeholder="$$$"
          @bind="Costo">
      </div>
    </div>

    <label class="label">Dias de Entrega</label>
    <div class="field is-grouped">
      <div class="control has-icons-right">
        <input
          required
          class="input"
          type="text"
          placeholder="5"
          @bind="Dias">
      </div>
    </div>



    <div class="field is-grouped">
      <div class="control">
        <button type="submit" class="button is-success">Aceptar</button>
      </div>
      <div class="control">
        <button class="button is-danger is-light">Cancelar</button>
      </div>
    </div>
  </fieldset>
</EditForm>

@code{

private string NombrePaqueteria, RFC, URL, NombreResponsable, Correo, Telefono, Costo, Dias;

[Parameter] public EventCallback OnValid {get; set;}

[Parameter] public Distribuidor Distribuidor {get; set;}

protected override void OnParametersSet()
  {
    if (Distribuidor == null)
      Distribuidor = new Distribuidor();
  }

    public Task Invalid()
  {
    //TODO: Display error messages
    Console.WriteLine($"Form not valid!");
    return Task.FromResult<bool>(true);
  }

  public async Task Valid()
  {
    Console.WriteLine($"Submitting form...");
    string ext = String.Empty;
    if (NombrePaqueteria != null && NombreResponsable != String.Empty)
      ext = $", ext. {NombrePaqueteria}";    
    await OnValid.InvokeAsync();
  }

}
